<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BlackWall Threat Intelligence (OSINT)</title>
  <style>
    /* ------------------------
       Body & Fonts
    ------------------------ */
    body {
      font-family: "Courier New", monospace;
      background-color: #0d0d0d;
      color: #00ff99;
      margin: 0;
      padding: 20px;
    }

    h1 { color: #00ffff; text-shadow: 0 0 5px #00ffff, 0 0 10px #ff00ff; }
    h2 { cursor: pointer; margin-bottom: 10px; }

    /* ------------------------
       Feed container & search
    ------------------------ */
    .container { max-width: 1200px; margin: auto; }
    .search-box { margin-bottom: 20px; padding: 5px; width: 100%; font-size: 1em; }
    .feed-container { margin-bottom: 40px; border: 1px solid #00ff99; padding: 10px; background: rgba(0,0,0,0.6); box-shadow: 0 0 10px #00ff99, 0 0 20px #ff00ff; }
    .entries { display: none; margin-top: 10px; }
    .entry-panel {
      border: 1px solid #00ff99;
      padding: 10px 15px;
      margin: 5px 0;
      background: rgba(0, 0, 0, 0.8);
      box-shadow: 0 0 5px #00ff99, 0 0 10px #ff00ff;
    }
    .entry-panel:hover { transform: scale(1.01); }

    a { color: #00ff99; text-decoration: none; font-weight: bold; }
    a:hover { text-decoration: underline; }

    small { display: block; color: #66ff99; margin-top: 5px; }
    footer { text-align: center; margin-top: 40px; color: #00ff99; }

    /* ------------------------
       Matrix background
    ------------------------ */
    canvas#matrix {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <canvas id="matrix"></canvas>
  <div class="container">
    <h1>Threat Intelligence OSINT Dashboard</h1>
    <input class="search-box" type="text" id="searchInput" placeholder="Search all feeds...">
    <div id="json-list"></div>
    <footer>Updated daily</footer>
  </div>

  <script>
    const feeds = [
      { name: "Bleeping Computer", file: "bleeping.json", type: "standard" },
      { name: "The Hacker News", file: "hackernews.json", type: "standard" },
      { name: "CISA Advisories", file: "cisa.json", type: "standard" },
      { name: "Mandiant Reports", file: "mandiant.json", type: "standard" },
      { name: "Ransomware Live", file: "ransomware_live.json", type: "standard" },
      { name: "MITRE ATT&CK Actors", file: "mitre.json", type: "mitre" },
    ];

    const list = document.getElementById("json-list");

    const allPanels = [];

    feeds.forEach(feed => {
      fetch(feed.file)
        .then(res => res.json())
        .then(data => {
          const container = document.createElement("div");
          container.className = "feed-container";

          const title = document.createElement("h2");
          title.textContent = feed.name + ` (${data.length})`;
          container.appendChild(title);

          const entriesDiv = document.createElement("div");
          entriesDiv.className = "entries";

          data.slice(0, 20).forEach(item => {
            const panel = document.createElement("div");
            panel.className = "entry-panel";

            // Field mapping per type
            if(feed.type === "mitre") {
              panel.innerHTML = `
                <a href="${item.mitre_url}" target="_blank">${item.actor_name}</a>
                <p>${item.description}</p>
                <small>Techniques: ${item.techniques || "N/A"} | Last Updated: ${new Date(item.last_updated).toLocaleString()}</small>
              `;
            } else {
              panel.innerHTML = `
                <a href="${item.link}" target="_blank">${item.title}</a>
                <p>${item.summary}</p>
                <small>${new Date(item.published).toLocaleString()}</small>
              `;
            }

            entriesDiv.appendChild(panel);
            allPanels.push(panel);
          });

          container.appendChild(entriesDiv);
          list.appendChild(container);

          // Collapsible toggle
          title.addEventListener("click", () => {
            entriesDiv.style.display = entriesDiv.style.display === "none" ? "block" : "none";
          });
        })
        .catch(err => console.error(`Failed to load ${feed.file}:`, err));
    });

    // ------------------------
    // Search functionality
    // ------------------------
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", () => {
      const term = searchInput.value.toLowerCase();
      allPanels.forEach(panel => {
        panel.style.display = panel.textContent.toLowerCase().includes(term) ? "block" : "none";
      });
    });

    // ------------------------
    // Matrix background
    // ------------------------
    const c = document.getElementById("matrix");
    c.width = window.innerWidth;
    c.height = window.innerHeight;
    const ctx = c.getContext("2d");

    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789@#$%^&*()*&^%";
    const fontSize = 14;
    const columns = c.width / fontSize;
    const drops = Array.from({length: columns}).map(() => 1);

    function draw() {
      ctx.fillStyle = "rgba(0,0,0,0.05)";
      ctx.fillRect(0, 0, c.width, c.height);
      ctx.fillStyle = "#0f0";
      ctx.font = fontSize + "px monospace";

      for (let i = 0; i < drops.length; i++) {
        const text = letters.charAt(Math.floor(Math.random() * letters.length));
        ctx.fillText(text, i*fontSize, drops[i]*fontSize);
        if(drops[i]*fontSize > c.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
      }
    }

    setInterval(draw, 35);

    window.addEventListener("resize", () => {
      c.width = window.innerWidth;
      c.height = window.innerHeight;
    });
  </script>
</body>
</html>
